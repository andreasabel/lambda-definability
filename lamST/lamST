# Î»ST

## Syntax

Size  i, j
  ::= x            (size variable)
    | â†‘ i          (successor)
    | âˆ            (limit)


Size Context Î”
  := List of size variables with bounds


Type  T, U
  ::= â„• i          (sized natural)
    | ğ•Š i          (sized stream)
    | T â‡’ U        (function)
    | âˆ€ x<i. T     (bounded size quantification)


Type Context Î“
  := List of terms variables with types


Term  t, u, v
  ::= x            (term variable)
    | Î» x:T. t     (lambda)
    | t u          (application)
    | Î› x<i. t     (size abstraction)
    | t @i         (size application)
    | 0            (zero)
    | S            (successor)
    | caseâ„•[T]     (case analysis for â„• at type T)
    | cons         (stream construction)
    | head         (stream head)
    | tail         (stream tail)
    | fixâ„•         (fixpoint)
    | fixğ•Š         (cofixpoint)


## Typing

### Î” âŠ¢ i size

x âˆˆ Î”
----------
Î” âŠ¢ x size

Î” âŠ¢ i size
------------
Î” âŠ¢ â†‘ i size

----------
Î” âŠ¢ âˆ size


### Î” âŠ¢ A type

Î” âŠ¢ i size
------------
Î” âŠ¢ â„• i type
Î” âŠ¢ ğ•Š i type

Î” âŠ¢ T type
Î” âŠ¢ U type
--------------
Î” âŠ¢ T â‡’ U type

Î” âŠ¢ x size
Î” âŠ¢ i size
Î”,x<i âŠ¢ T type
-----------------
Î” âŠ¢ âˆ€ x<i. T type


### Î” âŠ¢ i â‰¤ j

---------
Î” âŠ¢ i â‰¤ âˆ

---------
Î” âŠ¢ i â‰¤ i

Î” âŠ¢ i â‰¤ j
-------------
Î” âŠ¢ â†‘ i â‰¤ â†‘ j


### Î” âŠ¢ i < j

--------- (TODO: what if i = âˆ?)
Î” âŠ¢ i < âˆ

Î” âŠ¢ s â‰¤ t
-------------
Î” âŠ¢ s < â†‘ t


### Î” âŠ¢ T â‰¼ U

Î” âŠ¢ i â‰¤ j
-------------
Î” âŠ¢ â„• i â‰¼ â„• j

Î” âŠ¢ i â‰¥ j
-------------
Î” âŠ¢ ğ•Š i â‰¼ ğ•Š j

Î” âŠ¢ T â‰½ Tâ€²
Î” âŠ¢ U â‰¼ Uâ€²
-------------------
Î” âŠ¢ T â‡’ U â‰¼ Tâ€² â‡’ Uâ€²

Î”,x<i âŠ¢ T â‰¼ U
-----------------------
Î” âŠ¢ âˆ€ x<i. T â‰¼ âˆ€ x<i. U


### Î”; Î“ âŠ¢ t : T

Î”; Î“ âŠ¢ t : T
Î” âŠ¢ T â‰¼ U
------------ â‰¼
Î”; Î“ âŠ¢ t : U

x:T âˆˆ Î“ 
------------ var
Î”; Î“ âŠ¢ x : T

Î”; Î“,x:T âŠ¢ t : U
Î” âŠ¢ T type
------------------------- Î»
Î”; Î“ âŠ¢ Î» (x:T). t : T â‡’ U

Î”; Î“ âŠ¢ t : T â‡’ U
Î”; Î“ âŠ¢ u : T
---------------- app
Î”; Î“ âŠ¢ t u : U

Î”,x<i; Î“ âŠ¢ t : T
Î” âŠ¢ i size
-------------------------- Î›
Î”; Î“ âŠ¢ Î› x<i. t : âˆ€ x<i. t

Î”, Î“ âŠ¢ t : âˆ€ x<i. T
Î” âŠ¢ j < i
------------------------ @
Î”, Î“ âŠ¢ t @j : T[x := j]

--------------------- 0
Î”; Î“ âŠ¢ 0 : âˆ€ x<âˆ. â„• x

---------------------------------- S
Î”; Î“ âŠ¢ S : âˆ€ x<âˆ. âˆ€ y<x. â„• y â‡’ â„• x

Î” âŠ¢ T type
------------------------------------------------------- caseâ„•
Î”; Î“ âŠ¢ caseâ„•[T] : âˆ€ x<âˆ. T â‡’ (âˆ€ y<x. â„• y â‡’ T) â‡’ â„• x â‡’ T

--------------------------------------------- cons
Î”; Î“ âŠ¢ cons : âˆ€ x<âˆ. â„• âˆ â‡’ (âˆ€ y<x. ğ•Š y) â‡’ ğ•Š x

------------------------------- head
Î” ; Î“ âŠ¢ head : âˆ€ x<âˆ. ğ•Š x â‡’ â„• âˆ

-------------------------------------- tail
Î” ; Î“ âŠ¢ tail : âˆ€ x<âˆ. âˆ€ y<x. ğ•Š x â‡’ ğ•Š y

--------------------------------------------- fixğ•Š
fixğ•Š : (âˆ€ x<âˆ. (âˆ€y<x. ğ•Š y) â‡’ ğ•Š x) â‡’ âˆ€x<âˆ. ğ•Š x

--------------------------------------------- fixâ„•
fixâ„• : (âˆ€ x<âˆ. (âˆ€y<x. â„• y) â‡’ â„• x) â‡’ âˆ€x<âˆ. â„• x
